{"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/app.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/app.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":43}},"4":{"start":{"line":6,"column":26},"end":{"line":6,"column":66}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":45}},"6":{"start":{"line":8,"column":19},"end":{"line":8,"column":52}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":43}},"8":{"start":{"line":10,"column":24},"end":{"line":10,"column":55}},"9":{"start":{"line":11,"column":24},"end":{"line":11,"column":45}},"10":{"start":{"line":12,"column":27},"end":{"line":12,"column":51}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":22}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":64}},"14":{"start":{"line":18,"column":40},"end":{"line":18,"column":62}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":80}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":93}},"17":{"start":{"line":21,"column":8},"end":{"line":21,"column":65}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":62}},"19":{"start":{"line":23,"column":8},"end":{"line":23,"column":97}},"20":{"start":{"line":26,"column":30},"end":{"line":31,"column":9}},"21":{"start":{"line":27,"column":12},"end":{"line":27,"column":59}},"22":{"start":{"line":28,"column":12},"end":{"line":28,"column":92}},"23":{"start":{"line":29,"column":12},"end":{"line":29,"column":60}},"24":{"start":{"line":30,"column":12},"end":{"line":30,"column":19}},"25":{"start":{"line":32,"column":8},"end":{"line":32,"column":37}},"26":{"start":{"line":33,"column":8},"end":{"line":33,"column":36}},"27":{"start":{"line":36,"column":8},"end":{"line":36,"column":76}},"28":{"start":{"line":36,"column":36},"end":{"line":36,"column":74}},"29":{"start":{"line":39,"column":0},"end":{"line":39,"column":18}},"30":{"start":{"line":40,"column":0},"end":{"line":40,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":18},"end":{"line":24,"column":5}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":26},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":40},"end":{"line":18,"column":62}},"line":18},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":13},"end":{"line":34,"column":5}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":30},"end":{"line":26,"column":31}},"loc":{"start":{"line":26,"column":51},"end":{"line":31,"column":9}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":16},"end":{"line":37,"column":5}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":30},"end":{"line":36,"column":31}},"loc":{"start":{"line":36,"column":36},"end":{"line":36,"column":74}},"line":36}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":5,"22":5,"23":5,"24":5,"25":1,"26":1,"27":0,"28":0,"29":1,"30":1},"f":{"0":1,"1":0,"2":1,"3":5,"4":0,"5":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/app.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/app.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AAEnC,4CAA+C;AAC/C,mEAA4D;AAC5D,8CAAiD;AACjD,qDAAwD;AAExD,MAAM,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;AAC5C,MAAM,eAAe,GAAG,IAAI,yBAAe,EAAE,CAAC;AAC9C,MAAM,eAAe,GAAG,IAAI,eAAe,EAAE,CAAC;AAC9C,MAAM,kBAAkB,GAAG,IAAI,kBAAkB,EAAE,CAAC;AACpD,MAAM,GAAG;IAGP;QACE,IAAI,CAAC,GAAG,GAAG,OAAO,EAAE,CAAC;QAErB,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,wBAAwB;QACxB,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;QACxD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,eAAe,CAAC,QAAQ,EAAE,cAAc,CAAC,KAAK,CAAC,CAAC;QACxE,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,kBAAkB,CAAC,YAAY,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC;QACrF,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,iBAAiB,EAAE,cAAc,CAAC,QAAQ,CAAC,CAAC;QACzD,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,eAAe,CAAC,aAAa,CAAC,CAAC;QACtD,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,kBAAkB,CAAC,cAAc,EAAE,eAAe,CAAC,YAAY,CAAC,CAAC;IAC3F,CAAC;IAEO,MAAM;QACZ,MAAM,aAAa,GAA2B,CAAC,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;YAChE,GAAG,CAAC,MAAM,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;YAC/C,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,mCAAmC,CAAC,CAAC;YAChF,GAAG,CAAC,MAAM,CAAC,8BAA8B,EAAE,GAAG,CAAC,CAAC;YAChD,IAAI,EAAE,CAAC;QACT,CAAC,CAAC;QAEF,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAC7B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IAC9B,CAAC;IAEM,KAAK,CAAC,IAAqB;QAChC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI,EAAE,CAAC,CAAC,CAAC;IACtE,CAAC;CACF;AAEQ,kBAAG;AAEG,WAAG,GAAK,IAAI,GAAG,EAAE,KAAC","sourcesContent":["import * as express from 'express';\n\nimport UserController from './controller/User';\nimport LoginValidation from './middlewares/LoginValidation';\nimport AdminController from './controller/Admin';\nimport RegisterValidation from './middlewares/Register';\n\nconst userController = new UserController();\nconst loginValidation = new LoginValidation();\nconst adminController = new AdminController();\nconst registerValidation = new RegisterValidation();\nclass App {\n  public app: express.Express;\n\n  constructor() {\n    this.app = express();\n\n    this.config();\n\n    // NÃ£o remover essa rota\n    this.app.get('/', (req, res) => res.json({ ok: true }));\n    this.app.post('/login', loginValidation.Validate, userController.login);\n    this.app.post('/register', registerValidation.ValidateUser, userController.Register);\n    this.app.get('/login/validate', userController.validate);\n    this.app.get('/admin', adminController.getAllClients);\n    this.app.post('/admin', registerValidation.ValidateClient, adminController.createClient);\n  }\n\n  private config():void {\n    const accessControl: express.RequestHandler = (_req, res, next) => {\n      res.header('Access-Control-Allow-Origin', '*');\n      res.header('Access-Control-Allow-Methods', 'GET,POST,DELETE,OPTIONS,PUT,PATCH');\n      res.header('Access-Control-Allow-Headers', '*');\n      next();\n    };\n\n    this.app.use(express.json());\n    this.app.use(accessControl);\n  }\n\n  public start(PORT: string | number):void {\n    this.app.listen(PORT, () => console.log(`Running on port ${PORT}`));\n  }\n}\n\nexport { App };\n\nexport const { app } = new App();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81c6240122927de657aced6197562cab5eb5e2ea"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/User.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/User.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":56}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":39}},"3":{"start":{"line":8,"column":8},"end":{"line":12,"column":10}},"4":{"start":{"line":9,"column":40},"end":{"line":9,"column":48}},"5":{"start":{"line":10,"column":27},"end":{"line":10,"column":72}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":59}},"7":{"start":{"line":13,"column":8},"end":{"line":20,"column":10}},"8":{"start":{"line":14,"column":38},"end":{"line":14,"column":49}},"9":{"start":{"line":15,"column":27},"end":{"line":15,"column":73}},"10":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"11":{"start":{"line":17,"column":16},"end":{"line":17,"column":88}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":58}},"13":{"start":{"line":21,"column":8},"end":{"line":24,"column":10}},"14":{"start":{"line":22,"column":27},"end":{"line":22,"column":68}},"15":{"start":{"line":23,"column":12},"end":{"line":23,"column":48}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":59},"end":{"line":25,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":21},"end":{"line":8,"column":22}},"loc":{"start":{"line":8,"column":41},"end":{"line":12,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":24},"end":{"line":13,"column":25}},"loc":{"start":{"line":13,"column":44},"end":{"line":20,"column":9}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":24},"end":{"line":21,"column":25}},"loc":{"start":{"line":21,"column":44},"end":{"line":24,"column":9}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":57}},"type":"default-arg","locations":[{"start":{"line":6,"column":30},"end":{"line":6,"column":57}}],"line":6},"1":{"loc":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},{"start":{"line":16,"column":12},"end":{"line":18,"column":13}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{"0":[1],"1":[0,1]},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/User.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/User.ts"],"names":[],"mappings":";;AACA,yDAAkD;AAElD,6CAA6C;AAE7C,MAAM,cAAc;IAClB,YAAoB,cAAc,IAAI,qBAAW,EAAE;QAA/B,gBAAW,GAAX,WAAW,CAAoB;QAE5C,UAAK,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAqB,EAAE;YACtE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;YACrC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;YAC7D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC;QACjD,CAAC,CAAC;QAEK,aAAQ,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAqB,EAAE;YACzE,MAAM,EAAE,aAAa,EAAE,GAAG,GAAG,CAAC,OAAO,CAAC;YACtC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAuB,CAAC,CAAC;YACxE,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,CAAC;aACzE;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;QAChD,CAAC,CAAC;QAEK,aAAQ,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAqB,EAAE;YACzE,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACzD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC,CAAC;IApBoD,CAAC;CAqBxD;AAED,kBAAe,cAAc,CAAC","sourcesContent":["import { Request, Response } from 'express';\nimport UserService from '../services/UserService';\n\n// const ERROR_500 = 'Internal Server Error';\n\nclass UserController {\n  constructor(private userService = new UserService()) {}\n\n  public login = async (req: Request, res: Response): Promise<Response> => {\n    const { email, password } = req.body;\n    const result = await this.userService.login(email, password);\n    return res.status(200).json({ token: result });\n  };\n\n  public validate = async (req: Request, res: Response): Promise<Response> => {\n    const { authorization } = req.headers;\n    const result = await this.userService.validate(authorization as string);\n    if (!result) {\n      return res.status(401).json({ message: 'Incorrect email or password' });\n    }\n    return res.status(200).json({ role: result });\n  };\n\n  public Register = async (req: Request, res: Response): Promise<Response> => {\n    const result = await this.userService.Register(req.body);\n    return res.status(200).json(result);\n  };\n}\n\nexport default UserController;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dbbcee05311e307e307938d33bc3fafdcf7f3f0a"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/UserService.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/UserService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":15},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":12},"end":{"line":4,"column":35}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":59}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":41}},"6":{"start":{"line":10,"column":8},"end":{"line":22,"column":10}},"7":{"start":{"line":11,"column":25},"end":{"line":11,"column":82}},"8":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"9":{"start":{"line":13,"column":16},"end":{"line":13,"column":50}},"10":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":54}},"12":{"start":{"line":18,"column":26},"end":{"line":20,"column":14}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":25}},"14":{"start":{"line":23,"column":8},"end":{"line":31,"column":10}},"15":{"start":{"line":24,"column":26},"end":{"line":24,"column":63}},"16":{"start":{"line":25,"column":12},"end":{"line":29,"column":13}},"17":{"start":{"line":26,"column":35},"end":{"line":26,"column":40}},"18":{"start":{"line":27,"column":31},"end":{"line":27,"column":93}},"19":{"start":{"line":28,"column":16},"end":{"line":28,"column":35}},"20":{"start":{"line":30,"column":12},"end":{"line":30,"column":24}},"21":{"start":{"line":32,"column":8},"end":{"line":42,"column":10}},"22":{"start":{"line":33,"column":30},"end":{"line":33,"column":34}},"23":{"start":{"line":34,"column":31},"end":{"line":34,"column":88}},"24":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"25":{"start":{"line":36,"column":16},"end":{"line":36,"column":55}},"26":{"start":{"line":38,"column":29},"end":{"line":38,"column":63}},"27":{"start":{"line":39,"column":28},"end":{"line":39,"column":74}},"28":{"start":{"line":40,"column":43},"end":{"line":40,"column":50}},"29":{"start":{"line":41,"column":12},"end":{"line":41,"column":74}},"30":{"start":{"line":45,"column":0},"end":{"line":45,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":43,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":21},"end":{"line":10,"column":22}},"loc":{"start":{"line":10,"column":48},"end":{"line":22,"column":9}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":24},"end":{"line":23,"column":25}},"loc":{"start":{"line":23,"column":49},"end":{"line":31,"column":9}},"line":23},"3":{"name":"(anonymous_3)","decl":{"start":{"line":32,"column":24},"end":{"line":32,"column":25}},"loc":{"start":{"line":32,"column":40},"end":{"line":42,"column":9}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"type":"if","locations":[{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},{"start":{"line":12,"column":12},"end":{"line":14,"column":13}}],"line":12},"1":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"2":{"loc":{"start":{"line":25,"column":12},"end":{"line":29,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":29,"column":13}},{"start":{"line":25,"column":12},"end":{"line":29,"column":13}}],"line":25},"3":{"loc":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},{"start":{"line":35,"column":12},"end":{"line":37,"column":13}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":0,"21":1,"22":1,"23":1,"24":1,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{"0":[0,1],"1":[0,1],"2":[1,0],"3":[0,1]},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/UserService.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/UserService.ts"],"names":[],"mappings":";;AAAA,mCAAmC;AACnC,oCAAoC;AAIpC,4DAAqD;AAOrD,MAAM,UAAU,GAAG,YAAY,CAAC;AAChC,MAAM,YAAY;IAAlB;QACS,UAAK,GAAG,mBAAS,CAAC;QAElB,UAAK,GAAG,KAAK,EAAE,KAAa,EAAE,QAAgB,EAAmB,EAAE;YACxE,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAU,CAAC;YAChF,IAAI,CAAC,IAAI,EAAE;gBACT,MAAM,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAAC;aACnC;YACD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;gBAChD,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;aACvC;YACD,MAAM,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE;gBACtD,SAAS,EAAE,IAAI;aAChB,CAAC,CAAC;YACH,OAAO,KAA0B,CAAC;QACpC,CAAC,CAAC;QAEK,aAAQ,GAAG,KAAK,EAAE,aAAqB,EAAkB,EAAE;YAChE,MAAM,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,aAAa,EAAE,UAAU,CAAU,CAAC;YAC7D,IAAI,KAAK,EAAE;gBACT,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;gBACzB,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CACrC,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAC5B,CAAC;gBACX,OAAO,MAAM,CAAC,IAAwB,CAAC;aACxC;YACD,OAAO,IAAwB,CAAC;QAClC,CAAC,CAAC;QAEK,aAAQ,GAAG,KAAK,EAAE,IAAW,EAAkB,EAAE;YACtD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC;YACvB,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YAC7E,IAAI,UAAU,EAAE;gBACd,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;aACxC;YACD,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;YACpD,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,GAAG,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAC;YAC/D,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,OAAO,CAAC;YACvC,OAAO,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,CAAC,QAAQ,EAAsB,CAAC;QACpF,CAAC,CAAC;IACJ,CAAC;CAAA;AAED,kBAAe,YAAY,CAAC","sourcesContent":["import * as bcrypt from 'bcryptjs';\nimport * as Jwt from 'jsonwebtoken';\nimport IUser from '../interface/IUser';\nimport IToken from '../interface/IToken';\nimport IRole from '../interface/IRole';\nimport UserModel from '../database/models/UserModel';\n\ninterface token {\n  userId: number;\n  iat: number;\n  exp: number;\n}\nconst JWT_SECRET = 'jwt_secret';\nclass LoginService {\n  public model = UserModel;\n\n  public login = async (email: string, password: string): Promise<IToken> => {\n    const user = await this.model.findOne({ where: { email }, raw: true }) as IUser;\n    if (!user) {\n      throw new Error('User not found');\n    }\n    if (!bcrypt.compareSync(password, user.password)) {\n      throw new Error('Incorrect password');\n    }\n    const token = Jwt.sign({ userId: user.id }, JWT_SECRET, {\n      expiresIn: '1d',\n    });\n    return token as unknown as IToken;\n  };\n\n  public validate = async (authorization: string): Promise<IRole> => {\n    const token = Jwt.verify(authorization, JWT_SECRET) as token;\n    if (token) {\n      const { userId } = token;\n      const result = await this.model.findOne(\n        { where: { id: userId }, raw: true },\n      ) as IUser;\n      return result.role as unknown as IRole;\n    }\n    return null as unknown as IRole;\n  };\n\n  public Register = async (user: IUser): Promise<IUser> => {\n    const { email } = user;\n    const userExists = await this.model.findOne({ where: { email }, raw: true });\n    if (userExists) {\n      throw new Error('User already exists');\n    }\n    const password = bcrypt.hashSync(user.password, 10);\n    const newUser = await this.model.create({ ...user, password });\n    const { id, username, role } = newUser;\n    return { id, username, role, email, token: newUser.password } as unknown as IUser;\n  };\n}\n\nexport default LoginService;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d1cb5e4015238471e7f1d5d74e91a93f49b4d064"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/UserModel.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/UserModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":7,"column":0},"end":{"line":35,"column":3}},"4":{"start":{"line":36,"column":0},"end":{"line":36,"column":23}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/UserModel.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/UserModel.ts"],"names":[],"mappings":";;AAAA,yCAA6C;AAC7C,wBAAmB;AAEnB,MAAM,IAAK,SAAQ,iBAAK;CAMvB;AAED,IAAI,CAAC,IAAI,CAAC;IACR,EAAE,EAAE;QACF,IAAI,EAAE,qBAAS,CAAC,OAAO;QACvB,UAAU,EAAE,IAAI;QAChB,aAAa,EAAE,IAAI;KACpB;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;QAChB,MAAM,EAAE,IAAI;KACb;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;CACF,EAAE;IACD,SAAS,EAAE,UAAE;IACb,SAAS,EAAE,OAAO;IAClB,WAAW,EAAE,IAAI;IACjB,UAAU,EAAE,KAAK;CAClB,CAAC,CAAC;AAEH,kBAAe,IAAI,CAAC","sourcesContent":["import { DataTypes, Model } from 'sequelize';\nimport db from '.';\n\nclass User extends Model {\n  id!: number;\n  username!: string;\n  email!: string;\n  password!: string;\n  role!: string;\n}\n\nUser.init({\n  id: {\n    type: DataTypes.INTEGER,\n    primaryKey: true,\n    autoIncrement: true,\n  },\n  username: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n  email: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    unique: true,\n  },\n  password: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n  role: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n}, {\n  sequelize: db,\n  modelName: 'users',\n  underscored: true,\n  timestamps: false,\n});\n\nexport default User;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a03555914195d08652c2ab51b532455413ea9563"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/index.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/index.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":52}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/index.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/index.ts"],"names":[],"mappings":";;AAAA,yCAAsC;AACtC,6CAA6C;AAE7C,kBAAe,IAAI,qBAAS,CAAC,MAAM,CAAC,CAAC","sourcesContent":["import { Sequelize } from 'sequelize';\nimport * as config from '../config/database';\n\nexport default new Sequelize(config);\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0b40b43abb5843370eadd91206f539893eb1b153"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/LoginValidation.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/LoginValidation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":59}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":8},"end":{"line":20,"column":10}},"4":{"start":{"line":8,"column":40},"end":{"line":8,"column":48}},"5":{"start":{"line":9,"column":12},"end":{"line":11,"column":13}},"6":{"start":{"line":10,"column":16},"end":{"line":10,"column":86}},"7":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"8":{"start":{"line":13,"column":16},"end":{"line":13,"column":86}},"9":{"start":{"line":15,"column":27},"end":{"line":15,"column":84}},"10":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"11":{"start":{"line":17,"column":16},"end":{"line":17,"column":88}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":19}},"13":{"start":{"line":23,"column":0},"end":{"line":23,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":21,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":24},"end":{"line":7,"column":25}},"loc":{"start":{"line":7,"column":50},"end":{"line":20,"column":9}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":12},"end":{"line":11,"column":13}},"type":"if","locations":[{"start":{"line":9,"column":12},"end":{"line":11,"column":13}},{"start":{"line":9,"column":12},"end":{"line":11,"column":13}}],"line":9},"1":{"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"type":"if","locations":[{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},{"start":{"line":12,"column":12},"end":{"line":14,"column":13}}],"line":12},"2":{"loc":{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},"type":"if","locations":[{"start":{"line":16,"column":12},"end":{"line":18,"column":13}},{"start":{"line":16,"column":12},"end":{"line":18,"column":13}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":0,"7":2,"8":0,"9":2,"10":2,"11":1,"12":1,"13":1},"f":{"0":1,"1":2},"b":{"0":[0,2],"1":[0,2],"2":[1,1]},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/LoginValidation.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/LoginValidation.ts"],"names":[],"mappings":";;AACA,4DAAqD;AAErD,MAAM,eAAe;IAArB;QACS,UAAK,GAAG,mBAAS,CAAC;QAClB,aAAQ,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAC1E,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;YAErC,IAAI,CAAC,KAAK,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;aACvE;YAED,IAAI,CAAC,QAAQ,EAAE;gBACb,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;aACvE;YACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACzE,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC,CAAC;aACzE;YACD,IAAI,EAAE,CAAC;QACT,CAAC,CAAC;IACJ,CAAC;CAAA;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport UserModel from '../database/models/UserModel';\n\nclass LoginValidation {\n  public model = UserModel;\n  public Validate = async (req: Request, res: Response, next: NextFunction) => {\n    const { email, password } = req.body;\n\n    if (!email) {\n      return res.status(400).json({ message: 'All fields must be filled' });\n    }\n\n    if (!password) {\n      return res.status(400).json({ message: 'All fields must be filled' });\n    }\n    const result = await this.model.findOne({ where: { email }, raw: true });\n    if (!result) {\n      return res.status(401).json({ message: 'Incorrect email or password' });\n    }\n    next();\n  };\n}\n\nexport default LoginValidation;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"88615f99ccd56b692e8c6cf4192f78c2e9af3b43"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/Admin.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/Admin.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":3,"column":58}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":41}},"3":{"start":{"line":8,"column":8},"end":{"line":14,"column":10}},"4":{"start":{"line":9,"column":27},"end":{"line":9,"column":66}},"5":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"6":{"start":{"line":11,"column":16},"end":{"line":11,"column":77}},"7":{"start":{"line":13,"column":12},"end":{"line":13,"column":48}},"8":{"start":{"line":15,"column":8},"end":{"line":18,"column":10}},"9":{"start":{"line":16,"column":27},"end":{"line":16,"column":73}},"10":{"start":{"line":17,"column":12},"end":{"line":17,"column":48}},"11":{"start":{"line":21,"column":0},"end":{"line":21,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":61},"end":{"line":19,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":29},"end":{"line":8,"column":30}},"loc":{"start":{"line":8,"column":49},"end":{"line":14,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":28},"end":{"line":15,"column":29}},"loc":{"start":{"line":15,"column":48},"end":{"line":18,"column":9}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":59}},"type":"default-arg","locations":[{"start":{"line":6,"column":31},"end":{"line":6,"column":59}}],"line":6},"1":{"loc":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},{"start":{"line":10,"column":12},"end":{"line":12,"column":13}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":1},"f":{"0":1,"1":0,"2":0},"b":{"0":[1],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/Admin.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/controller/Admin.ts"],"names":[],"mappings":";;AACA,2DAAoD;AAEpD,6CAA6C;AAE7C,MAAM,eAAe;IACnB,YAAoB,eAAe,IAAI,sBAAY,EAAE;QAAjC,iBAAY,GAAZ,YAAY,CAAqB;QAE9C,kBAAa,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAqB,EAAE;YAC9E,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,CAAC;YACvD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,CAAC;aAC9D;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC,CAAC;QAEK,iBAAY,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAqB,EAAE;YAC7E,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAC9D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC,CAAC;IAbsD,CAAC;CAc1D;AAED,kBAAe,eAAe,CAAC","sourcesContent":["import { Request, Response } from 'express';\nimport AdminService from '../services/AdminService';\n\n// const ERROR_500 = 'Internal Server Error';\n\nclass AdminController {\n  constructor(private adminService = new AdminService()) {}\n\n  public getAllClients = async (req: Request, res: Response): Promise<Response> => {\n    const result = await this.adminService.getAllClients();\n    if (result.length === 0) {\n      return res.status(404).json({ message: 'No clients found' });\n    }\n    return res.status(200).json(result);\n  };\n\n  public createClient = async (req: Request, res: Response): Promise<Response> => {\n    const result = await this.adminService.createClient(req.body);\n    return res.status(200).json(result);\n  };\n}\n\nexport default AdminController;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c66e6cf924490b0c2b0a2fd638661e158aac29a6"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/AdminService.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/AdminService.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":63}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":43}},"3":{"start":{"line":7,"column":8},"end":{"line":10,"column":10}},"4":{"start":{"line":8,"column":27},"end":{"line":8,"column":66}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":26}},"6":{"start":{"line":11,"column":8},"end":{"line":14,"column":10}},"7":{"start":{"line":12,"column":27},"end":{"line":12,"column":58}},"8":{"start":{"line":13,"column":12},"end":{"line":13,"column":26}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":15,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":29},"end":{"line":7,"column":30}},"loc":{"start":{"line":7,"column":41},"end":{"line":10,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":28},"end":{"line":11,"column":29}},"loc":{"start":{"line":11,"column":46},"end":{"line":14,"column":9}},"line":11}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":1,"7":0,"8":0,"9":1},"f":{"0":1,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/AdminService.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/services/AdminService.ts"],"names":[],"mappings":";;AACA,gEAAyD;AAEzD,MAAM,YAAY;IAAlB;QACS,UAAK,GAAG,qBAAW,CAAC;QAEpB,kBAAa,GAAG,KAAK,IAAwB,EAAE;YACpD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACvD,OAAO,MAA8B,CAAC;QACxC,CAAC,CAAC;QAEK,iBAAY,GAAG,KAAK,EAAE,MAAe,EAAoB,EAAE;YAChE,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAE/C,OAAO,MAA4B,CAAC;QACtC,CAAC,CAAC;IACJ,CAAC;CAAA;AAED,kBAAe,YAAY,CAAC","sourcesContent":["import IClient from '../interface/IClient';\nimport ClientModel from '../database/models/ClientModel';\n\nclass AdminService {\n  public model = ClientModel;\n\n  public getAllClients = async (): Promise<IClient[]> => {\n    const result = await this.model.findAll({ raw: true });\n    return result as unknown as IClient[];\n  };\n\n  public createClient = async (client: IClient): Promise<IClient> => {\n    const result = await this.model.create(client);\n\n    return result as unknown as IClient;\n  };\n}\n\nexport default AdminService;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8b9f724a5ec521e39f7b280fce4b27daece10e2b"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/ClientModel.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/ClientModel.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":11},"end":{"line":4,"column":23}},"3":{"start":{"line":7,"column":0},"end":{"line":39,"column":3}},"4":{"start":{"line":40,"column":0},"end":{"line":40,"column":25}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/ClientModel.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/database/models/ClientModel.ts"],"names":[],"mappings":";;AAAA,yCAA6C;AAC7C,wBAAmB;AAEnB,MAAM,MAAO,SAAQ,iBAAK;CAQzB;AAED,MAAM,CAAC,IAAI,CAAC;IACV,EAAE,EAAE;QACF,IAAI,EAAE,qBAAS,CAAC,OAAO;QACvB,UAAU,EAAE,IAAI;QAChB,aAAa,EAAE,IAAI;KACpB;IACD,QAAQ,EAAE;QACR,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;QAChB,MAAM,EAAE,IAAI;KACb;IACD,IAAI,EAAE;QACJ,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;IACD,OAAO,EAAE;QACP,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;IACD,YAAY,EAAE;QACZ,IAAI,EAAE,qBAAS,CAAC,MAAM;QACtB,SAAS,EAAE,KAAK;KACjB;CACF,EAAE;IACD,SAAS,EAAE,UAAE;IACb,SAAS,EAAE,SAAS;IACpB,WAAW,EAAE,IAAI;IACjB,UAAU,EAAE,KAAK;CAClB,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["import { DataTypes, Model } from 'sequelize';\nimport db from '.';\n\nclass CLient extends Model {\n  id!: number;\n  username!: string;\n  email!: string;\n  password!: string;\n  role!: string;\n  address!: string;\n  relationship!: string;\n}\n\nCLient.init({\n  id: {\n    type: DataTypes.INTEGER,\n    primaryKey: true,\n    autoIncrement: true,\n  },\n  username: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n  email: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    unique: true,\n  },\n  role: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n  address: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n  relationship: {\n    type: DataTypes.STRING,\n    allowNull: false,\n  },\n}, {\n  sequelize: db,\n  modelName: 'clients',\n  underscored: true,\n  timestamps: false,\n});\n\nexport default CLient;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"83e33bf3cf42bbb56c71194ff5aa4ae6b20ab48e"},"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/Register.ts":{"path":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/Register.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":63}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":43}},"3":{"start":{"line":7,"column":8},"end":{"line":21,"column":10}},"4":{"start":{"line":8,"column":69},"end":{"line":8,"column":77}},"5":{"start":{"line":9,"column":43},"end":{"line":9,"column":71}},"6":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":86}},"8":{"start":{"line":13,"column":12},"end":{"line":15,"column":13}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":76}},"10":{"start":{"line":16,"column":27},"end":{"line":16,"column":84}},"11":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":93}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},"14":{"start":{"line":22,"column":8},"end":{"line":42,"column":10}},"15":{"start":{"line":23,"column":56},"end":{"line":23,"column":64}},"16":{"start":{"line":24,"column":43},"end":{"line":24,"column":71}},"17":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"18":{"start":{"line":26,"column":16},"end":{"line":26,"column":86}},"19":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"20":{"start":{"line":29,"column":16},"end":{"line":29,"column":76}},"21":{"start":{"line":31,"column":27},"end":{"line":31,"column":84}},"22":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"23":{"start":{"line":33,"column":16},"end":{"line":33,"column":93}},"24":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"25":{"start":{"line":36,"column":16},"end":{"line":36,"column":99}},"26":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"27":{"start":{"line":39,"column":16},"end":{"line":39,"column":99}},"28":{"start":{"line":41,"column":12},"end":{"line":41,"column":19}},"29":{"start":{"line":45,"column":0},"end":{"line":45,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":43,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":30},"end":{"line":7,"column":31}},"loc":{"start":{"line":7,"column":56},"end":{"line":21,"column":9}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":28},"end":{"line":22,"column":29}},"loc":{"start":{"line":22,"column":54},"end":{"line":42,"column":9}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},{"start":{"line":10,"column":12},"end":{"line":12,"column":13}}],"line":10},"1":{"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":73}},"type":"binary-expr","locations":[{"start":{"line":10,"column":16},"end":{"line":10,"column":22}},{"start":{"line":10,"column":26},"end":{"line":10,"column":35}},{"start":{"line":10,"column":39},"end":{"line":10,"column":47}},{"start":{"line":10,"column":51},"end":{"line":10,"column":56}},{"start":{"line":10,"column":60},"end":{"line":10,"column":73}}],"line":10},"2":{"loc":{"start":{"line":13,"column":12},"end":{"line":15,"column":13}},"type":"if","locations":[{"start":{"line":13,"column":12},"end":{"line":15,"column":13}},{"start":{"line":13,"column":12},"end":{"line":15,"column":13}}],"line":13},"3":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17},"4":{"loc":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},{"start":{"line":25,"column":12},"end":{"line":27,"column":13}}],"line":25},"5":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":57}},"type":"binary-expr","locations":[{"start":{"line":25,"column":16},"end":{"line":25,"column":22}},{"start":{"line":25,"column":26},"end":{"line":25,"column":35}},{"start":{"line":25,"column":39},"end":{"line":25,"column":48}},{"start":{"line":25,"column":52},"end":{"line":25,"column":57}}],"line":25},"6":{"loc":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},{"start":{"line":28,"column":12},"end":{"line":30,"column":13}}],"line":28},"7":{"loc":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},{"start":{"line":32,"column":12},"end":{"line":34,"column":13}}],"line":32},"8":{"loc":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},{"start":{"line":35,"column":12},"end":{"line":37,"column":13}}],"line":35},"9":{"loc":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},{"start":{"line":38,"column":12},"end":{"line":40,"column":13}}],"line":38}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":2,"16":2,"17":2,"18":0,"19":2,"20":1,"21":1,"22":1,"23":0,"24":1,"25":0,"26":1,"27":0,"28":1,"29":1},"f":{"0":1,"1":0,"2":2},"b":{"0":[0,0],"1":[0,0,0,0,0],"2":[0,0],"3":[0,0],"4":[0,2],"5":[2,2,2,2],"6":[1,1],"7":[0,1],"8":[0,1],"9":[0,1]},"inputSourceMap":{"version":3,"file":"/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/Register.ts","sources":["/home/kaio/fork/desafio-tecnico/desafio-Fabritech-fullstack/backend/src/middlewares/Register.ts"],"names":[],"mappings":";;AACA,gEAAyD;AAEzD,MAAM,kBAAkB;IAAxB;QACS,UAAK,GAAG,qBAAW,CAAC;QACpB,mBAAc,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAChF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;YAClE,MAAM,sBAAsB,GAAG,4BAA4B,CAAC;YAE5D,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE;gBAC7D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;aACvE;YAED,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBACvC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,iBAAiB,EAAE,CAAC,CAAC;aAC7D;YACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACzE,IAAI,MAAM,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC,CAAC;aAC9E;YACD,IAAI,EAAE,CAAC;QACT,CAAC,CAAC;QAEK,iBAAY,GAAG,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;YAC9E,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC;YACrD,MAAM,sBAAsB,GAAG,4BAA4B,CAAC;YAC5D,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,EAAE;gBAC7C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC,CAAC;aACvE;YACD,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBACvC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,iBAAiB,EAAE,CAAC,CAAC;aAC7D;YACD,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;YACzE,IAAI,MAAM,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC,CAAC;aAC9E;YACD,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC,CAAC;aACpF;YACD,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC,CAAC;aACpF;YAAC,IAAI,EAAE,CAAC;QACX,CAAC,CAAC;IACJ,CAAC;CAAA;AAED,kBAAe,kBAAkB,CAAC","sourcesContent":["import { Request, Response, NextFunction } from 'express';\nimport ClientModel from '../database/models/ClientModel';\n\nclass RegisterValidation {\n  public model = ClientModel;\n  public ValidateClient = async (req: Request, res: Response, next: NextFunction) => {\n    const { email, username, address, role, relationship } = req.body;\n    const EMAIL_VALIDATION_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (!email || !username || !address || !role || !relationship) {\n      return res.status(400).json({ message: 'All fields must be filled' });\n    }\n\n    if (!EMAIL_VALIDATION_REGEX.test(email)) {\n      return res.status(400).json({ message: 'Email incorrect' });\n    }\n    const result = await this.model.findOne({ where: { email }, raw: true });\n    if (result) {\n      return res.status(401).json({ message: 'this email is already registered' });\n    }\n    next();\n  };\n\n  public ValidateUser = async (req: Request, res: Response, next: NextFunction) => {\n    const { email, username, password, role } = req.body;\n    const EMAIL_VALIDATION_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!email || !username || !password || !role) {\n      return res.status(400).json({ message: 'All fields must be filled' });\n    }\n    if (!EMAIL_VALIDATION_REGEX.test(email)) {\n      return res.status(400).json({ message: 'Email incorrect' });\n    }\n    const result = await this.model.findOne({ where: { email }, raw: true });\n    if (result) {\n      return res.status(401).json({ message: 'this email is already registered' });\n    }\n    if (password.length < 6) {\n      return res.status(401).json({ message: 'password must be at least 6 characters' });\n    }\n    if (username.length < 6) {\n      return res.status(401).json({ message: 'username must be at least 6 characters' });\n    } next();\n  };\n}\n\nexport default RegisterValidation;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1a49103ca968274d741943f1450c119e4f0e87dd"}}